# 2021-08-14
무선통신 음성 코덱(G729a)에 맞춰 sox pipeline 구축
```
echo "$0: generating phone call noise"
sed -i '2~2 s\$\sox -t wav - -r 8k -t wav - | sox -t wav - -r 16k -t wav - | sox -t wav - -t wav - highpass 100 | sox -t wav - -t wav - lowpass 1000 | sox -t wav - -t wav - dither -s |\g' data/${trainset}/wav.scp
sed -i '2~8 s\$\sox -t wav - -t wav - gain 16 |\g' data/${trainset}/wav.scp
```

<br>

<br>

# 2021-08-15

sox 전처리 (band-pass 100-1000, dither, gain) 데이터 및 k-spon 말뭉치 데이터 merge 후 학습진행

라즈베리 파이와 스마트폰 간의 음성 입출력 문제 해결을 위한 토론진행

<br>

<br>

# 2021-08-16 14:50

학습 진행 과정에서 오류 발생 
```
local/chain/multi_condition/run_tdnn_1n.sh: exp/chain_rvb/tree_a/final.mdl already exists, refusing to overwrite it.
```

<br>

final.mdl 파일이 이미 존재하여 지우고 다시 학습 진행

```
data=./speechDATA
nCPU=28
. ./cmd.sh
. ./path.sh
sudo sudo local/chain/multi_condition/run_tdnn_1n.sh --nj $nCPU
```

<br>

<br>

# 2021-08-24

말뭉치 json파일 파싱 -> pypy3 json_parsing3.py

<br>

- 현재 corpus

모두의 말뭉치: 신문, 구어, 담화 말뭉치 parsing

ai hub: 소상공인 관련 parsing

ksponspeech: text 전처리

<br>

- 최종 사용 corpus

| text name          | lines         |
| :----------------- | :------------ |
| cafe.txt           | 8,000 lines   |
| cafemain.txt       | 160,000 lines |
| food.txt           | 5,000 lines   |
| kshopping.txt      | 180,000 lines |
| market.txt         | 3,600 lines   |
| restaurant.txt     | 15,800 lines  |
| restaurantmain.txt | 290,000 lines |
| store.txt          | 15,000 lines  |
| 합 계              | 677,400 lines |

<br>

시작시간: **2021-08-24 16:18**

예상 소요시간: 180.6시간 (7일 12시간)

소요시간: 1시간 20분



# 2021-08-28 21:03

## Trouble shooting

> 새로운 언어모델에 대한 lexiconp file의 부재 > prepare_lang.sh를 이용한 lexiconp 파일 생성 필요

- 새로운 언어모델을 만들기 위해 data/local/lm/run_task.sh를 사용하여 arpa file 및 lexicon file 생성 (lexiconp파일의 부재)
  - lexiconp 파일에 대한 설명은 Prepare_Data.md 참고
  - lexiconp file은 prepare_lang.sh에서 생성
    - run_kspon.sh를 통하여 prepare_lang.sh를 이용한 lexiconp 파일 생성하는 형식 확인 가능
    - extend_vocab_demo.sh의 Stage0에서 원본파일을 가지고 prepare_lang.sh 실행
- [g2p](https://www.jask.or.kr/articles/xml/bQA1/)를 이용한 lexiconp 제작 중 (대략 18:00부터 진행)

